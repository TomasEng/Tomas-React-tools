"use strict";(self.webpackChunktomas_react_tools=self.webpackChunktomas_react_tools||[]).push([[217],{"./src/components/UnitSelector/UnitSelector.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:function(){return Example},__namedExportsOrder:function(){return __namedExportsOrder}});var _Example$parameters,_Example$parameters2,_Example$parameters2$,C_Users_tomas_IdeaProjects_tomas_react_tools_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_UnitSelector__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/UnitSelector/UnitSelector.tsx"),_test_data_unitTextFn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/test-data/unitTextFn.ts"),meta={title:"Components/UnitSelector",component:_UnitSelector__WEBPACK_IMPORTED_MODULE_0__.n,tags:["autodocs"],parameters:{layout:"centered"}},Example={args:{dimension:"length",textFn:_test_data_unitTextFn__WEBPACK_IMPORTED_MODULE_1__.q,prefixText:"Prefix",unitText:"Unit"}};__webpack_exports__.default=meta,Example.parameters=(0,C_Users_tomas_IdeaProjects_tomas_react_tools_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_tomas_IdeaProjects_tomas_react_tools_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},Example.parameters),{},{docs:(0,C_Users_tomas_IdeaProjects_tomas_react_tools_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_tomas_IdeaProjects_tomas_react_tools_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},null===(_Example$parameters=Example.parameters)||void 0===_Example$parameters?void 0:_Example$parameters.docs),{},{source:(0,C_Users_tomas_IdeaProjects_tomas_react_tools_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({originalSource:"{\n  args: {\n    dimension: 'length',\n    textFn: unitTextFn,\n    prefixText: 'Prefix',\n    unitText: 'Unit'\n  }\n}"},null===(_Example$parameters2=Example.parameters)||void 0===_Example$parameters2||null===(_Example$parameters2$=_Example$parameters2.docs)||void 0===_Example$parameters2$?void 0:_Example$parameters2$.source)})});var __namedExportsOrder=["Example"]},"./src/components/UnitSelector/UnitSelector.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{n:function(){return UnitSelector}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),lib=__webpack_require__("./node_modules/enheter/lib/index.js"),UnitSelector_module_root="UnitSelector_root__YtK42",UnitSelector_module_unitSelector="UnitSelector_unitSelector__q2QvD",UnitSelector_module_prefixSelector="UnitSelector_prefixSelector__kQcuS",esm=__webpack_require__("./node_modules/@digdir/design-system-react/dist/esm/index.js"),unitPrefixes=["quetta","ronna","yotta","zetta","exa","peta","tera","giga","mega","kilo","hecto","deca","","deci","centi","milli","micro","nano","pico","femto","atto","zepto","yocto","ronto","quecto"],UnitSelectorActionType=function(UnitSelectorActionType){return UnitSelectorActionType.SET_UNIT="SET_UNIT",UnitSelectorActionType.SET_UNIT_KEY="SET_UNIT_KEY",UnitSelectorActionType.SET_PREFIX="SET_PREFIX",UnitSelectorActionType}({}),unitSelectorReducer=function unitSelectorReducer(callback){return function(state,action){var newState;switch(action.type){case UnitSelectorActionType.SET_UNIT:newState=function setUnit(state,action){return{unit:action.unit}}(0,action);break;case UnitSelectorActionType.SET_UNIT_KEY:newState=function setUnitKey(state,action){var _state$unit=state.unit,prefix=_state$unit.prefix,dimension=_state$unit.dimension;return{unit:(0,lib.findUnitsByDimension)(dimension)[action.unitKey].withPrefix(prefix)}}(state,action);break;case UnitSelectorActionType.SET_PREFIX:newState=function setPrefix(state,action){return{unit:state.unit.withPrefix(action.prefix||null,state.unit.key)}}(state,action);break;default:newState=state}return callback(newState),newState}},prefixAsString=function prefixAsString(prefix){return prefix||""},useUpdate=__webpack_require__("./src/hooks/useUpdate.ts"),unitUtils=__webpack_require__("./src/utils/unitUtils.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),UnitSelector=function UnitSelector(_ref){var dimension=_ref.dimension,onChange=_ref.onChange,_ref$prefixText=_ref.prefixText,prefixText=void 0===_ref$prefixText?"Prefix":_ref$prefixText,selectedUnit=_ref.selectedUnit,_ref$textFn=_ref.textFn,textFn=void 0===_ref$textFn?function(unit){return unit.key||""}:_ref$textFn,_ref$unitText=_ref.unitText,unitText=void 0===_ref$unitText?"Unit":_ref$unitText,units=lib.allUnits[dimension].units,_useReducer=(0,react.useReducer)(unitSelectorReducer((function reducerCallback(state){return onChange&&onChange(state.unit)})),{unit:(0,unitUtils.Lz)(dimension,selectedUnit)}),_useReducer2=(0,slicedToArray.Z)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];(0,useUpdate.P)((function(){dispatch({type:UnitSelectorActionType.SET_UNIT,unit:(0,unitUtils.Lz)(dimension,selectedUnit)})}),[dimension,selectedUnit]);var options=Object.values(units).filter((function(unit){return!unit.prefix})).map((function(unit){var _findUnitName;return{label:textFn(unit),value:null!==(_findUnitName=(0,lib.findUnitName)(unit))&&void 0!==_findUnitName?_findUnitName:""}})),prefixOptions=unitPrefixes.map((function(prefix){return{label:prefix||"",value:prefix||""}}));return(0,jsx_runtime.jsxs)("span",{className:UnitSelector_module_root,children:[(0,jsx_runtime.jsx)("span",{className:UnitSelector_module_prefixSelector,children:(0,jsx_runtime.jsx)(esm.Ph,{label:prefixText,options:prefixOptions,onChange:function setPrefix(prefix){return dispatch({type:UnitSelectorActionType.SET_PREFIX,prefix:prefix})},value:prefixAsString(state.unit.prefix)})}),(0,jsx_runtime.jsx)("span",{className:UnitSelector_module_unitSelector,children:(0,jsx_runtime.jsx)(esm.Ph,{label:unitText,options:options,onChange:function setUnit(unitKey){return dispatch({type:UnitSelectorActionType.SET_UNIT_KEY,unitKey:unitKey})},value:(0,lib.findUnitName)(state.unit.withPrefix(null))})})]})};try{UnitSelector.displayName="UnitSelector",UnitSelector.__docgenInfo={description:"",displayName:"UnitSelector",props:{dimension:{defaultValue:null,description:"",name:"dimension",required:!0,type:{name:"enum",value:[{value:'"acceleration"'},{value:'"amountOfSubstance"'},{value:'"area"'},{value:'"capacitance"'},{value:'"charge"'},{value:'"conductance"'},{value:'"conductivity"'},{value:'"current"'},{value:'"density"'},{value:'"energy"'},{value:'"force"'},{value:'"frequency"'},{value:'"inductance"'},{value:'"length"'},{value:'"luminousIntensity"'},{value:'"magneticFlux"'},{value:'"magneticFluxDensity"'},{value:'"mass"'},{value:'"power"'},{value:'"pressure"'},{value:'"resistance"'},{value:'"resistivity"'},{value:'"temperature"'},{value:'"time"'},{value:'"velocity"'},{value:'"voltage"'},{value:'"volume"'}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((unit: Unit<Dimension>) => void)"}},prefixText:{defaultValue:{value:"Prefix"},description:"",name:"prefixText",required:!1,type:{name:"string"}},selectedUnit:{defaultValue:null,description:"",name:"selectedUnit",required:!1,type:{name:"Unit<Dimension>"}},textFn:{defaultValue:{value:"(unit: Unit) => unit.key || ''"},description:"",name:"textFn",required:!1,type:{name:"UnitTextFn<Dimension>"}},unitText:{defaultValue:{value:"Unit"},description:"",name:"unitText",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/UnitSelector/UnitSelector.tsx#UnitSelector"]={docgenInfo:UnitSelector.__docgenInfo,name:"UnitSelector",path:"src/components/UnitSelector/UnitSelector.tsx#UnitSelector"})}catch(__react_docgen_typescript_loader_error){}}}]);